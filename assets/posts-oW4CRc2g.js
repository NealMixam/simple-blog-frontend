import{G as v,l as o,H as u}from"./index-Cra8Asye.js";const g=v("posts",()=>{const n=o([]),l=o([]),s=o(!1),a=o(null);return{posts:n,userPosts:l,loading:s,error:a,fetchAllPosts:async()=>{s.value=!0,a.value=null;try{const e=await u.get("/posts");n.value=e.data.data}catch(e){a.value=e.response?.data?.message||"Failed to fetch posts"}finally{s.value=!1}},fetchUserPosts:async()=>{s.value=!0,a.value=null;try{const e=await u.get("/post");l.value=e.data.data}catch(e){a.value=e.response?.data?.message||"Failed to fetch your posts"}finally{s.value=!1}},createPost:async e=>{s.value=!0,a.value=null;try{const t=await u.post("/post",e);return l.value.unshift(t.data.data),{success:!0,data:t.data.data}}catch(t){return a.value=t.response?.data?.message||"Failed to create post",{success:!1,message:a.value}}finally{s.value=!1}},updatePost:async(e,t)=>{s.value=!0,a.value=null;try{const r=await u.put(`/post/${e}`,t),c=l.value.findIndex(d=>d.id===e);return c!==-1&&(l.value[c]=r.data.data),{success:!0,data:r.data.data}}catch(r){return a.value=r.response?.data?.message||"Failed to update post",{success:!1,message:a.value}}finally{s.value=!1}},deletePost:async e=>{s.value=!0,a.value=null;try{return await u.delete(`/post/${e}`),l.value=l.value.filter(t=>t.id!==e),{success:!0}}catch(t){return a.value=t.response?.data?.message||"Failed to delete post",{success:!1,message:a.value}}finally{s.value=!1}}}});export{g as u};

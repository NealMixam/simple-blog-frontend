import{_ as k,n as v,A as D,B as w,s as S,a as x,c as l,b as n,i as P,e as i,r as c,F as B,f as T,C as b,k as N,l as V,o as E,m as F,h as a,w as u,t as p,d as U,j as A}from"./index-BowADRrS.js";import{u as L}from"./posts-kgxlw3Oa.js";const M={name:"PostsView",components:{Card:x,Button:S,ProgressSpinner:w,ConfirmDialog:D,Toast:v},setup(){const m=F(),e=L(),g=b(),t=N(),d=V(!1);E(async()=>{d.value=!0,await e.fetchUserPosts(),d.value=!1});const y=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),r=o=>{m.push(`/posts/${o}/edit`)},_=()=>{m.push("/posts/create")},f=o=>{g.require({message:`Are you sure you want to delete "${o.title}"?`,header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",accept:()=>C(o.id)})},C=async o=>{const s=await e.deletePost(o);s.success?t.add({severity:"success",summary:"Success",detail:"Post deleted successfully",life:3e3}):t.add({severity:"error",summary:"Error",detail:s.message,life:5e3})};return{userPosts:e.userPosts,loading:d,formatDate:y,editPost:r,goToCreatePost:_,confirmDelete:f}}},$={class:"posts-view"},j={class:"posts-header"},q={key:1,class:"empty-state"},z={key:2,class:"posts-grid"},R={class:"post-meta"},Y={key:0},G={class:"post-content"},H={class:"post-actions"};function I(m,e,g,t,d,y){const r=c("Button"),_=c("ProgressSpinner"),f=c("Card"),C=c("ConfirmDialog"),o=c("Toast");return a(),l("div",$,[n("div",j,[e[0]||(e[0]=n("h1",null,"My Posts",-1)),i(r,{label:"Create New Post",icon:"pi pi-plus",onClick:t.goToCreatePost},null,8,["onClick"])]),t.loading&&t.userPosts.length===0?(a(),P(_,{key:0})):t.userPosts.length===0?(a(),l("div",q,[e[1]||(e[1]=n("i",{class:"pi pi-inbox",style:{"font-size":"4rem",color:"#9ca3af"}},null,-1)),e[2]||(e[2]=n("h3",null,"No posts yet",-1)),e[3]||(e[3]=n("p",null,"Start sharing your thoughts with the world",-1)),i(r,{label:"Create Your First Post",icon:"pi pi-plus",onClick:t.goToCreatePost},null,8,["onClick"])])):(a(),l("div",z,[(a(!0),l(B,null,T(t.userPosts,s=>(a(),P(f,{key:s.id,class:"post-card"},{title:u(()=>[A(p(s.title),1)]),subtitle:u(()=>[n("div",R,[n("span",null,"Created: "+p(t.formatDate(s.created_at)),1),s.updated_at!==s.created_at?(a(),l("span",Y," â€¢ Updated: "+p(t.formatDate(s.updated_at)),1)):U("",!0)])]),content:u(()=>[n("p",G,p(s.content),1)]),footer:u(()=>[n("div",H,[i(r,{label:"Edit",icon:"pi pi-pencil",text:"",onClick:h=>t.editPost(s.id)},null,8,["onClick"]),i(r,{label:"Delete",icon:"pi pi-trash",text:"",severity:"danger",onClick:h=>t.confirmDelete(s)},null,8,["onClick"])])]),_:2},1024))),128))])),i(C),i(o)])}const O=k(M,[["render",I]]);export{O as default};

import{_ as V,n as g,s as h,D as k,v as w,a as S,c as u,e as n,w as _,r as l,k as P,l as B,x as v,m as N,h as p,b as a,y as E,d as b,z as C,t as T,j as I}from"./index-8TrqC3Qf.js";import{u as j}from"./posts-BfojwRKU.js";const z={name:"CreatePostView",components:{Card:S,InputText:w,Textarea:k,Button:h,Toast:g},setup(){const i=N(),e=j(),c=P(),t=B(!1),o=v({title:"",content:""}),d=v({}),m=()=>{const s={};return o.title.trim()?o.title.length<3&&(s.title="Title must be at least 3 characters"):s.title="Title is required",o.content.trim()?o.content.length<10&&(s.content="Content must be at least 10 characters"):s.content="Content is required",Object.assign(d,s),Object.keys(s).length===0};return{form:o,errors:d,loading:t,handleSubmit:async()=>{if(!m())return;t.value=!0;const s=await e.createPost(o);t.value=!1,s.success?(c.add({severity:"success",summary:"Success",detail:"Post created successfully!",life:3e3}),i.push("/posts")):c.add({severity:"error",summary:"Error",detail:s.message,life:5e3})}}}},q={class:"create-post"},D={class:"field"},O={key:0,class:"p-error"},R={class:"field"},U={key:0,class:"p-error"},F={class:"form-actions"};function M(i,e,c,t,o,d){const m=l("InputText"),f=l("Textarea"),s=l("Button"),y=l("Card"),x=l("Toast");return p(),u("div",q,[n(y,null,{title:_(()=>[...e[4]||(e[4]=[I("Create New Post",-1)])]),content:_(()=>[a("form",{onSubmit:e[3]||(e[3]=E((...r)=>t.handleSubmit&&t.handleSubmit(...r),["prevent"])),class:"post-form"},[a("div",D,[e[5]||(e[5]=a("label",{for:"title"},"Title",-1)),n(m,{id:"title",modelValue:t.form.title,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.title=r),placeholder:"Enter post title",class:C({"p-invalid":t.errors.title})},null,8,["modelValue","class"]),t.errors.title?(p(),u("small",O,T(t.errors.title),1)):b("",!0)]),a("div",R,[e[6]||(e[6]=a("label",{for:"content"},"Content",-1)),n(f,{id:"content",modelValue:t.form.content,"onUpdate:modelValue":e[1]||(e[1]=r=>t.form.content=r),placeholder:"Write your post content...",rows:"10",autoResize:"",class:C({"p-invalid":t.errors.content})},null,8,["modelValue","class"]),t.errors.content?(p(),u("small",U,T(t.errors.content),1)):b("",!0)]),a("div",F,[n(s,{label:"Cancel",icon:"pi pi-times",text:"",onClick:e[2]||(e[2]=r=>i.$router.back())}),n(s,{type:"submit",label:"Create Post",icon:"pi pi-check",loading:t.loading},null,8,["loading"])])],32)]),_:1}),n(x)])}const G=V(z,[["render",M],["__scopeId","data-v-521f8c3e"]]);export{G as default};

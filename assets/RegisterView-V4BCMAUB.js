import{_ as C,n as x,p as R,s as S,q as T,v as E,a as U,c as i,e as t,w as g,r as n,u as B,k as q,l as A,x as y,m as D,h as d,b as a,y as I,d as c,z as u,t as f,j as _}from"./index-8TrqC3Qf.js";const N={name:"RegisterView",components:{Card:U,InputText:E,Password:T,Button:S,Divider:R,Toast:x},setup(){const P=D(),e=B(),p=q(),s=A(!1),o=y({username:"",email:"",password:"",confirmPassword:""}),w=y({}),m=()=>{const r={};return o.username?o.username.length<3&&(r.username="Username must be at least 3 characters"):r.username="Username is required",o.email?/\S+@\S+\.\S+/.test(o.email)||(r.email="Email is invalid"):r.email="Email is required",o.password?o.password.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",o.confirmPassword?o.password!==o.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",Object.assign(w,r),Object.keys(r).length===0};return{form:o,errors:w,loading:s,handleRegister:async()=>{if(!m())return;s.value=!0;const r=await e.register({username:o.username,email:o.email,password:o.password});s.value=!1,r.success?(p.add({severity:"success",summary:"Success",detail:"Account created successfully!",life:3e3}),P.push("/posts")):p.add({severity:"error",summary:"Error",detail:r.message,life:5e3})}}}},j={class:"auth-container"},M={class:"field"},z={key:0,class:"p-error"},O={class:"field"},F={key:0,class:"p-error"},L={class:"field"},Y={key:0,class:"p-error"},G={class:"field"},H={key:0,class:"p-error"},J={class:"auth-footer"};function K(P,e,p,s,o,w){const m=n("InputText"),v=n("Password"),r=n("Button"),V=n("Divider"),h=n("router-link"),b=n("Card"),k=n("Toast");return d(),i("div",j,[t(b,{class:"auth-card"},{title:g(()=>[...e[5]||(e[5]=[_("Create Your Account",-1)])]),content:g(()=>[a("form",{onSubmit:e[4]||(e[4]=I((...l)=>s.handleRegister&&s.handleRegister(...l),["prevent"])),class:"auth-form"},[a("div",M,[e[6]||(e[6]=a("label",{for:"username"},"Username",-1)),t(m,{id:"username",modelValue:s.form.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.form.username=l),placeholder:"Choose a username",class:u({"p-invalid":s.errors.username})},null,8,["modelValue","class"]),s.errors.username?(d(),i("small",z,f(s.errors.username),1)):c("",!0)]),a("div",O,[e[7]||(e[7]=a("label",{for:"email"},"Email",-1)),t(m,{id:"email",modelValue:s.form.email,"onUpdate:modelValue":e[1]||(e[1]=l=>s.form.email=l),type:"email",placeholder:"Enter your email",class:u({"p-invalid":s.errors.email})},null,8,["modelValue","class"]),s.errors.email?(d(),i("small",F,f(s.errors.email),1)):c("",!0)]),a("div",L,[e[8]||(e[8]=a("label",{for:"password"},"Password",-1)),t(v,{id:"password",modelValue:s.form.password,"onUpdate:modelValue":e[2]||(e[2]=l=>s.form.password=l),placeholder:"Create a password",toggleMask:"",class:u({"p-invalid":s.errors.password})},null,8,["modelValue","class"]),s.errors.password?(d(),i("small",Y,f(s.errors.password),1)):c("",!0)]),a("div",G,[e[9]||(e[9]=a("label",{for:"confirmPassword"},"Confirm Password",-1)),t(v,{id:"confirmPassword",modelValue:s.form.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>s.form.confirmPassword=l),placeholder:"Confirm your password",feedback:!1,toggleMask:"",class:u({"p-invalid":s.errors.confirmPassword})},null,8,["modelValue","class"]),s.errors.confirmPassword?(d(),i("small",H,f(s.errors.confirmPassword),1)):c("",!0)]),t(r,{type:"submit",label:"Register",icon:"pi pi-user-plus",loading:s.loading,class:"auth-button"},null,8,["loading"])],32),t(V),a("div",J,[a("p",null,[e[11]||(e[11]=_("Already have an account? ",-1)),t(h,{to:"/login",class:"auth-link"},{default:g(()=>[...e[10]||(e[10]=[_("Login here",-1)])]),_:1})])])]),_:1}),t(k)])}const W=C(N,[["render",K],["__scopeId","data-v-655276fa"]]);export{W as default};

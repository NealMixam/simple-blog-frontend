import{_ as g,n as h,s as P,D as k,v as E,a as S,c as f,e as r,w as b,r as l,k as w,l as B,x as y,o as I,E as N,m as j,h as _,b as a,y as z,d as T,z as x,t as C,j as R}from"./index-8TrqC3Qf.js";import{u as U}from"./posts-BfojwRKU.js";const q={name:"EditPostView",components:{Card:S,InputText:E,Textarea:k,Button:P,Toast:h},setup(){const i=N(),t=j(),u=U(),e=w(),c=B(!1),n=y({title:"",content:""}),d=y({});I(()=>{p()});const p=()=>{const s=parseInt(i.params.id),o=u.userPosts.find(V=>V.id===s);o?(n.title=o.title,n.content=o.content):(e.add({severity:"error",summary:"Error",detail:"Post not found",life:5e3}),t.push("/posts"))},m=()=>{const s={};return n.title.trim()?n.title.length<3&&(s.title="Title must be at least 3 characters"):s.title="Title is required",n.content.trim()?n.content.length<10&&(s.content="Content must be at least 10 characters"):s.content="Content is required",Object.assign(d,s),Object.keys(s).length===0};return{form:n,errors:d,loading:c,handleSubmit:async()=>{if(!m())return;c.value=!0;const s=await u.updatePost(i.params.id,n);c.value=!1,s.success?(e.add({severity:"success",summary:"Success",detail:"Post updated successfully!",life:3e3}),t.push("/posts")):e.add({severity:"error",summary:"Error",detail:s.message,life:5e3})}}}},D={class:"edit-post"},M={class:"field"},O={key:0,class:"p-error"},F={class:"field"},W={key:0,class:"p-error"},A={class:"form-actions"};function G(i,t,u,e,c,n){const d=l("InputText"),p=l("Textarea"),m=l("Button"),v=l("Card"),s=l("Toast");return _(),f("div",D,[r(v,null,{title:b(()=>[...t[4]||(t[4]=[R("Edit Post",-1)])]),content:b(()=>[a("form",{onSubmit:t[3]||(t[3]=z((...o)=>e.handleSubmit&&e.handleSubmit(...o),["prevent"])),class:"post-form"},[a("div",M,[t[5]||(t[5]=a("label",{for:"title"},"Title",-1)),r(d,{id:"title",modelValue:e.form.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.title=o),placeholder:"Enter post title",class:x({"p-invalid":e.errors.title})},null,8,["modelValue","class"]),e.errors.title?(_(),f("small",O,C(e.errors.title),1)):T("",!0)]),a("div",F,[t[6]||(t[6]=a("label",{for:"content"},"Content",-1)),r(p,{id:"content",modelValue:e.form.content,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.content=o),placeholder:"Write your post content...",rows:"10",autoResize:"",class:x({"p-invalid":e.errors.content})},null,8,["modelValue","class"]),e.errors.content?(_(),f("small",W,C(e.errors.content),1)):T("",!0)]),a("div",A,[r(m,{label:"Cancel",icon:"pi pi-times",text:"",onClick:t[2]||(t[2]=o=>i.$router.back())}),r(m,{type:"submit",label:"Update Post",icon:"pi pi-check",loading:e.loading},null,8,["loading"])])],32)]),_:1}),r(s)])}const K=g(q,[["render",G],["__scopeId","data-v-87fe34b8"]]);export{K as default};
